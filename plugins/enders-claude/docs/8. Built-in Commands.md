# 8. Built-in Commands - Core CLI Tools

## Overview

Built-in commands are the core CLI interface for Claude Code, providing session management, configuration, context control, and utility operations. They include both slash commands (used within Claude sessions) and CLI flags (used when starting Claude).

**Think of them as**: The control panel for Claude Code - managing sessions, settings, and operations.

**Key characteristics**:
- Slash commands: Used in active sessions (`/help`, `/clear`, etc.)
- CLI flags: Used at startup (`claude --print`, `--resume`, etc.)
- Built-in tools: Read, Write, Edit, Bash, Grep, Glob
- Permission system: Control tool access
- Non-interactive mode: Headless automation

## Key Concepts

### Command Types

| Type | Syntax | Context | Examples |
|------|--------|---------|----------|
| **Slash Commands** | `/command` | Active session | `/help`, `/clear`, `/rewind` |
| **CLI Flags** | `claude --flag` | Startup | `--resume`, `--print`, `--agent` |
| **Built-in Tools** | Used by Claude | During tasks | Read, Write, Edit, Bash |

### Command Categories

**Session Management**: `/clear`, `/resume`, `/rewind`
**Configuration**: `/config`, `/permissions`, `/hooks`, `/mcp`
**Information**: `/help`, `/cost`, `/context`, `/version`, `/debug`
**Customization**: `/memory`, `/output-style`, `/agents`

## Built-in Slash Commands

### Session Management

#### `/clear`
Start a fresh session, archiving previous conversation.

**Usage**:
```
/clear
```

**Effect**: New conversation, previous session archived

#### `/resume` or `/continue`
Resume previous session.

**Usage**:
```
/resume
```

**Note**: Same as `claude --continue` at startup

#### `/rewind`
Undo changes back to previous checkpoint.

**Usage**:
```
/rewind
```

**Shortcut**: **Esc + Esc**

**Options**:
- Conversation only
- Code only
- Both

#### `/compact`
Compress context to reduce token usage.

**Usage**:
```
/compact
```

**Effect**: Summarizes conversation, frees context space

### Configuration

#### `/config`
Configure settings, permissions, hooks, plugins.

**Usage**:
```
/config
```

**Opens**: Interactive configuration menu

#### `/permissions`
Manage tool permissions and restrictions.

**Usage**:
```
/permissions
```

**Effect**: Shows/modifies allowed/denied tools

#### `/hooks`
Configure hooks (PreToolUse, PostToolUse, etc.).

**Usage**:
```
/hooks
```

**Effect**: Interactive hook configuration

#### `/mcp`
Authenticate with MCP servers and manage connections.

**Usage**:
```
/mcp
```

**Effect**: Shows MCP status, handles OAuth authentication

#### `/memory`
View and edit project memory (CLAUDE.md).

**Usage**:
```
/memory
```

**Effect**: Opens CLAUDE.md for editing

#### `/output-style`
Change how Claude responds.

**Usage**:
```
/output-style              # Show available styles
/output-style explanatory  # Switch to explanatory style
/output-style default      # Return to default
```

### Information

#### `/help`
Display help information and available commands.

**Usage**:
```
/help
```

**Alias**: `/?`

#### `/cost`
Display current session costs and token usage.

**Usage**:
```
/cost
```

**Shows**:
- Input tokens
- Output tokens
- Total cost (USD)

#### `/context`
Check context window usage and available space.

**Usage**:
```
/context
```

**Shows**:
- Context used
- Context remaining
- Token breakdown

#### `/version`
Show Claude Code version.

**Usage**:
```
/version
```

#### `/debug`
Enable debug output for troubleshooting.

**Usage**:
```
/debug
```

**Effect**: Verbose logging enabled

### Agents

#### `/agents`
View available subagents and delegation options.

**Usage**:
```
/agents
```

**Shows**: List of available agents with descriptions

### Custom Skills

Any skill with a `name` field becomes a slash command:

```yaml
---
name: commit
---
```

Invoked as:
```
/commit
```

With arguments:
```
/review-pr 123
```

### Bug Reporting

#### `/bug`
Report issues with Claude Code.

**Usage**:
```
/bug
```

**Opens**: Bug report template

## CLI Flags

### Session Control

#### `--resume` / `--continue`
Resume previous session.

**Usage**:
```bash
claude --resume
claude --continue
```

#### `--fork-session`
Fork current session into new branch.

**Usage**:
```bash
claude --fork-session
```

**Effect**: New session with full history preserved

#### `--session-id <id>`
Resume specific session by ID.

**Usage**:
```bash
claude --session-id abc123
```

### Non-Interactive Mode

#### `-p` / `--print`
Non-interactive mode (headless).

**Usage**:
```bash
claude -p "Fix lint errors in src/" --allowedTools Edit,Write
```

**Use cases**:
- CI/CD pipelines
- Automated scripts
- Pre-commit hooks

**Output formats**:
```bash
# Default (text)
claude -p "command"

# JSON streaming
claude -p "command" --output-format stream-json

# Structured JSON
claude -p "command" --output-format json
```

#### `--allowedTools`
Restrict tools in non-interactive mode.

**Usage**:
```bash
claude -p "format code" --allowedTools Edit,Write
```

**Common restrictions**:
- `Read` - Read-only
- `Read,Grep,Glob` - Analysis only
- `Edit,Write` - File modifications only
- `Bash(git *)` - Git commands only

### Agent Selection

#### `--agent <path>`
Load specific agent definition.

**Usage**:
```bash
claude --agent .claude/agents/code-reviewer.md
```

#### `--agents <paths>`
Load multiple agent definitions.

**Usage**:
```bash
claude --agents ./agent1.md,./agent2.md
```

### System Prompt

#### `--system-prompt <text>`
Override system prompt.

**Usage**:
```bash
claude --system-prompt "You are a Python expert"
```

#### `--system-prompt-file <path>`
Load system prompt from file.

**Usage**:
```bash
claude --system-prompt-file custom-prompt.md
```

#### `--append-system-prompt <text>`
Append to system prompt.

**Usage**:
```bash
claude --append-system-prompt "Always use type hints"
```

### MCP Debugging

#### `--mcp-debug`
Enable MCP debugging output.

**Usage**:
```bash
claude --mcp-debug
```

### Initialization

#### `--init`
Initialize Claude Code in project.

**Usage**:
```bash
claude --init
```

**Effect**: Creates `.claude/` directory structure

#### `--maintenance`
Run maintenance tasks.

**Usage**:
```bash
claude --maintenance
```

## Built-in Tools

### File Operations

#### Read
Read file contents.

**Parameters**:
- `file_path`: Path to file
- `offset`: Start line (optional)
- `limit`: Number of lines (optional)

**Used by Claude to**: View file contents

#### Write
Create or overwrite file.

**Parameters**:
- `file_path`: Path to file
- `content`: File content

**Used by Claude to**: Create new files

#### Edit
Modify existing file with exact string replacement.

**Parameters**:
- `file_path`: Path to file
- `old_string`: Text to replace
- `new_string`: Replacement text
- `replace_all`: Replace all occurrences (optional)

**Used by Claude to**: Edit existing files

### Search Operations

#### Grep
Search file contents with regex.

**Parameters**:
- `pattern`: Regex pattern
- `path`: Directory/file to search (optional)
- `glob`: File filter (e.g., "*.ts")
- `output_mode`: content, files_with_matches, count
- `-i`: Case insensitive
- `-A`, `-B`, `-C`: Context lines

**Used by Claude to**: Find code patterns

#### Glob
Find files by pattern.

**Parameters**:
- `pattern`: Glob pattern (e.g., "**/*.js")
- `path`: Directory to search (optional)

**Used by Claude to**: Find files by name

### Command Execution

#### Bash
Execute shell commands.

**Parameters**:
- `command`: Shell command
- `timeout`: Timeout in ms (default 120000)
- `run_in_background`: Background execution (optional)

**Used by Claude to**: Run git, npm, build commands, etc.

**Restrictions**: Configurable via permissions

### Other Tools

#### Task
Delegate to subagents.

**Parameters**:
- `subagent_type`: Agent name
- `prompt`: Task description
- `description`: Short summary
- `model`: Model override (optional)
- `run_in_background`: Background execution (optional)

**Used by Claude to**: Delegate to specialized agents

## Permission System

### Configuration

**File**: `.claude/settings.json`

```json
{
  "permissions": {
    "allow": ["Read", "Write", "Edit", "Bash(git *)"],
    "deny": ["Bash(rm *)", "Bash(sudo *)"]
  }
}
```

### Permission Patterns

| Pattern | Matches |
|---------|---------|
| `"Read"` | Read tool |
| `"Bash"` | All bash commands |
| `"Bash(git *)"` | Git commands only |
| `"Bash(npm test)"` | Exact command |
| `"mcp__database__*"` | All database MCP tools |

### Permission Modes

| Mode | Behavior |
|------|----------|
| `auto` | Auto-allow all |
| `ask` | Prompt for confirmation |
| `deny` | Block all |

## Usage Patterns

### Basic Usage

#### Example 1: Session Management

```bash
# Start new session
claude

# Resume previous session
claude --resume

# Start fresh
/clear

# Undo recent changes
/rewind
```

#### Example 2: Configuration

```
# Configure settings
/config

# Set up hooks
/hooks

# Manage MCP servers
/mcp

# Edit project memory
/memory
```

#### Example 3: Information

```
# Check context usage
/context

# Check costs
/cost

# Get help
/help

# Check version
/version
```

### Advanced Usage

#### Example 4: Non-Interactive Mode (CI/CD)

```bash
# Pre-commit hook
claude -p "fix lint errors" --allowedTools Edit,Write

# CI pipeline
claude -p "analyze security issues" --allowedTools Read,Grep,Glob --output-format json

# Automated refactoring
claude -p "refactor authentication module" --allowedTools Read,Edit,Bash(git *)
```

#### Example 5: Custom Agent at Startup

```bash
# Load specific agent
claude --agent .claude/agents/code-reviewer.md

# Load multiple agents
claude --agents ./reviewer.md,./security.md
```

#### Example 6: Permission-Restricted Session

```bash
# Read-only session
claude --allowedTools Read,Grep,Glob

# Git-only session
claude --allowedTools Bash(git *)

# Safe review session
claude --agent reviewer.md --allowedTools Read,Grep,Glob
```

## Examples

### Complete Workflows

#### Workflow 1: Code Review

```bash
# Start with code reviewer agent
claude --agent .claude/agents/code-reviewer.md --allowedTools Read,Grep,Glob,Bash(git *)

# In session
User: Review the recent changes
Claude: [Analyzes with read-only access]

# Check context usage
/context

# Check costs
/cost
```

#### Workflow 2: Automated Formatting

```bash
# Non-interactive formatting
claude -p "format all TypeScript files" \
  --allowedTools Edit,Write,Bash(npx prettier *) \
  --output-format json | tee format-results.json
```

#### Workflow 3: Session Forking

```bash
# Main session
claude

# Try alternative approach
claude --fork-session

# Keep working in forked session
# Original session unaffected
```

## Best Practices

### Session Management

1. **Use /clear strategically**: Start fresh for unrelated tasks
2. **Resume sessions**: Continue multi-day work
3. **Fork for experiments**: Try alternatives without losing main work
4. **Rewind early**: Don't wait, undo mistakes immediately

### Configuration

1. **Check /context regularly**: Monitor token usage
2. **Review /cost**: Track API spending
3. **Configure permissions**: Restrict dangerous operations
4. **Use /memory**: Keep CLAUDE.md up to date

### Non-Interactive Mode

1. **Restrict tools**: Only grant necessary tools
2. **Use structured output**: Parse JSON results
3. **Set timeouts**: Prevent hanging
4. **Log output**: Capture for debugging

### Debugging

1. **Use /debug**: Enable verbose output
2. **Check --mcp-debug**: Debug MCP issues
3. **Review permissions**: Verify tool access
4. **Test commands manually**: Before automation

## Gotchas and Troubleshooting

### Common Issues

#### Issue 1: Command Not Found

**Symptoms**: `/command` not recognized

**Causes**:
- Typo
- Command doesn't exist
- Skill not loaded

**Solutions**:
```
/help  # List available commands
/agents  # List available agents
```

#### Issue 2: Permission Denied

**Symptoms**: Tool execution blocked

**Cause**: Permissions configuration

**Solution**:
```
/permissions  # Review settings
```

Or edit `.claude/settings.json`:
```json
{
  "permissions": {
    "allow": ["Read", "Write", "Edit", "Bash"]
  }
}
```

#### Issue 3: Context Full

**Symptoms**: "Context window full" error

**Solutions**:
```
/compact  # Compress context
/clear    # Start fresh
```

Or use subagents to keep output separate.

#### Issue 4: Non-Interactive Mode Hangs

**Symptoms**: `claude -p` doesn't return

**Causes**:
- Command waiting for input
- Infinite loop
- No timeout set

**Solutions**:
```bash
# Add timeout
timeout 300 claude -p "command"

# Restrict tools
claude -p "command" --allowedTools Read,Grep
```

## API Reference

### Slash Commands Summary

| Command | Purpose | Aliases |
|---------|---------|---------|
| `/help` | Show help | `/?` |
| `/clear` | Start fresh | - |
| `/resume` | Resume session | `/continue` |
| `/rewind` | Undo changes | Esc+Esc |
| `/compact` | Compress context | - |
| `/config` | Configure settings | - |
| `/permissions` | Manage permissions | - |
| `/hooks` | Configure hooks | - |
| `/mcp` | Manage MCP servers | - |
| `/memory` | Edit CLAUDE.md | - |
| `/output-style` | Change output format | - |
| `/agents` | List agents | - |
| `/cost` | Show costs | - |
| `/context` | Show context usage | - |
| `/version` | Show version | - |
| `/debug` | Enable debugging | - |
| `/bug` | Report bug | - |

### CLI Flags Summary

| Flag | Purpose |
|------|---------|
| `--resume`, `--continue` | Resume session |
| `--fork-session` | Fork session |
| `--session-id <id>` | Resume specific session |
| `-p`, `--print` | Non-interactive mode |
| `--allowedTools <tools>` | Restrict tools |
| `--agent <path>` | Load agent |
| `--agents <paths>` | Load multiple agents |
| `--system-prompt <text>` | Override system prompt |
| `--system-prompt-file <path>` | Load system prompt from file |
| `--append-system-prompt <text>` | Append to system prompt |
| `--output-format <format>` | Output format (text, json, stream-json) |
| `--mcp-debug` | Enable MCP debugging |
| `--init` | Initialize project |
| `--maintenance` | Run maintenance |

### Built-in Tools Summary

| Tool | Purpose | Parameters |
|------|---------|------------|
| **Read** | Read files | file_path, offset, limit |
| **Write** | Create files | file_path, content |
| **Edit** | Modify files | file_path, old_string, new_string, replace_all |
| **Grep** | Search content | pattern, path, glob, output_mode, -i, -A, -B, -C |
| **Glob** | Find files | pattern, path |
| **Bash** | Run commands | command, timeout, run_in_background |
| **Task** | Delegate to agents | subagent_type, prompt, description, model, run_in_background |

## Related Features

### Skills
Skills add custom slash commands. Built-in commands provide core functionality.

### CLAUDE.md
Use `/memory` to edit CLAUDE.md. Built-in commands manage configuration.

### Hooks
Hooks automate tool events. Built-in commands provide manual control.

### Subagents
Use `/agents` to see available agents. Task tool delegates to agents.

## Additional Resources

- **Official Documentation**: https://docs.anthropic.com/claude/docs/claude-code-commands
- **CLI Reference**: https://docs.anthropic.com/claude/docs/cli-reference
- **GitHub**: https://github.com/anthropics/claude-code

---

**Documentation Complete**: You've now learned all 8 major Claude Code features. Return to [docs/README.md](./README.md) for the full feature overview and navigation.
