# 2. Skills - Reusable Workflows

## Overview

Skills are packaged units of expertise and workflows that extend Claude Code's capabilities. They teach Claude domain knowledge, automate common tasks, and create reusable command patterns that can be invoked by you or Claude automatically when relevant.

**Think of them as**: Programmable plugins for Claude - define once, use repeatedly.

**Key characteristics**:
- Defined in `SKILL.md` files with YAML frontmatter
- Can be invoked manually (`/skill-name`) or automatically by Claude
- Support dynamic argument substitution
- Can bundle supporting files (templates, scripts, examples)
- Can run in isolated context (fork mode)
- Support conditional invocation control

## Key Concepts

### Skills vs. Other Features

| Feature | Purpose | Invocation | Use Case |
|---------|---------|------------|----------|
| **CLAUDE.md** | Persistent facts | Automatic (always loaded) | Code style, project context |
| **Skills** | Reusable workflows | Manual or automatic | `/commit`, API patterns, reviews |
| **Subagents** | Specialized workers | Claude delegates | Parallel reviews, high-volume tasks |
| **Hooks** | Event automation | Automatic (on events) | Format on save, validation |

### Skill Types

#### Reference Skills
Provide domain knowledge that Claude applies inline when relevant.

**Example**: API design patterns loaded automatically when Claude writes API code.

```yaml
---
name: api-patterns
description: RESTful API design patterns. Use when designing or implementing APIs.
user-invocable: false
---

When designing APIs:
- Use nouns for resources, verbs for actions
- Return appropriate HTTP status codes
- Include pagination for list endpoints
```

#### Task Skills
Step-by-step workflows invoked as commands.

**Example**: `/commit` skill that creates Git commits with proper formatting.

```yaml
---
name: commit
description: Create a Git commit with proper formatting
disable-model-invocation: true
---

1. Run `git status` to see changes
2. Run `git diff` to review changes
3. Draft commit message following project conventions
4. Stage files and commit
```

#### Hybrid Skills
Can be invoked manually or applied automatically.

**Example**: Code review checklist applied when reviewing code or invoked as `/review`.

```yaml
---
name: review
description: Review code for quality, security, and style. Use when reviewing PRs or code changes.
---

Review checklist:
- Code quality and readability
- Security vulnerabilities
- Test coverage
- Performance considerations
```

### Invocation Control

Control who can invoke skills:

| Configuration | User | Claude | Use Case |
|---------------|------|--------|----------|
| Default (neither field) | ✅ | ✅ | Both can invoke |
| `disable-model-invocation: true` | ✅ | ❌ | User-only (side effects) |
| `user-invocable: false` | ❌ | ✅ | Claude-only (background knowledge) |
| Both = true | ❌ | ❌ | Disabled (why would you?) |

### Context Modes

Skills can run in different context modes:

| Mode | Description | Use Case |
|------|-------------|----------|
| **default** | Same context as main conversation | Normal skills |
| **fork** | Isolated subagent context | High-volume output, parallel work |

## How It Works

### Discovery Process

1. **Session starts** - Claude Code scans for SKILL.md files
2. **Load skill metadata** - Reads frontmatter (name, description, tools)
3. **Register commands** - Creates `/skill-name` commands
4. **Match by description** - Claude decides when to auto-invoke based on description

### Invocation Flow

#### Manual Invocation (User)

```
User: /commit
  ↓
Claude Code: Loads skill "commit"
  ↓
Claude: Receives skill instructions + user arguments
  ↓
Claude: Executes workflow step-by-step
  ↓
Result: Commit created
```

#### Automatic Invocation (Claude)

```
User: "Let's add a new API endpoint"
  ↓
Claude: Matches task with skill descriptions
  ↓
Claude: Loads "api-patterns" skill (user-invocable: false)
  ↓
Claude: Applies patterns while implementing
  ↓
Result: API endpoint following conventions
```

### Scope Hierarchy

Skills are discovered from multiple locations with this priority:

| Location | Path | Scope | Priority |
|----------|------|-------|----------|
| **Enterprise** | System-managed | Organization | Highest |
| **Personal** | `~/.claude/skills/<name>/SKILL.md` | All your projects | High |
| **Project** | `.claude/skills/<name>/SKILL.md` | Current project | Medium |
| **Plugin** | `<plugin>/skills/<name>/SKILL.md` | When plugin enabled | Lowest |

Higher priority locations override lower when skill names conflict.

## Configuration

### File Structure

#### Basic Skill

```
.claude/skills/my-skill/
└── SKILL.md
```

#### Skill with Supporting Files

```
.claude/skills/api-doc/
├── SKILL.md
├── template.yaml        # OpenAPI template
├── example.yaml         # Example documentation
└── scripts/
    └── validate.sh      # Validation script
```

### SKILL.md Format

```markdown
---
name: skill-name
description: What this skill does and when to use it
tools: Read, Write, Bash
model: sonnet
disable-model-invocation: true
user-invocable: true
context: default
hooks:
  PreToolUse:
    - matcher: "Write"
      hooks:
        - type: command
          command: "echo 'Validating...'"
---

# Skill Instructions

Your instructions here. Claude receives these when skill is invoked.

## Supporting Files

Reference supporting files with relative paths:
- Template: @template.yaml
- Example: @example.yaml

## Dynamic Arguments

- All arguments: $ARGUMENTS
- First argument: $0
- Second argument: $1
- Session ID: ${CLAUDE_SESSION_ID}
```

### Frontmatter Fields

| Field | Type | Required | Default | Description |
|-------|------|----------|---------|-------------|
| `name` | string | Yes | - | Skill name (used for `/name` command) |
| `description` | string | Yes | - | What skill does, when Claude should use it |
| `tools` | string | No | All | Comma-separated allowed tools |
| `disallowedTools` | string | No | None | Tools to deny |
| `model` | string | No | inherit | Model: sonnet, opus, haiku, inherit |
| `disable-model-invocation` | boolean | No | false | If true, only user can invoke |
| `user-invocable` | boolean | No | true | If false, only Claude can invoke |
| `context` | string | No | default | Context mode: default or fork |
| `hooks` | object | No | {} | Skill-specific hooks |
| `allowedPrompts` | array | No | [] | Bash permission prompts |

### Supporting Files

Skills can bundle supporting files that Claude can reference:

```
.claude/skills/new-component/
├── SKILL.md
├── component-template.tsx
├── test-template.spec.tsx
└── styles-template.module.css
```

Reference in SKILL.md:
```markdown
Use this component template: @component-template.tsx
Use this test template: @test-template.spec.tsx
```

### Dynamic Substitutions

Skills support runtime variable substitution:

| Variable | Description | Example |
|----------|-------------|---------|
| `$ARGUMENTS` | All arguments passed to skill | `/review 123` → "123" |
| `$0` | First argument | `/review 123 456` → "123" |
| `$1` | Second argument | `/review 123 456` → "456" |
| `$N` | Nth argument (0-indexed) | `/review a b c d` → `$3` = "d" |
| `${CLAUDE_SESSION_ID}` | Current session ID | `session_abc123` |
| `${CLAUDE_PLUGIN_ROOT}` | Plugin root directory | `/path/to/plugin` |

**Example**:
```markdown
---
name: review-pr
description: Review a GitHub pull request
---

Review pull request $ARGUMENTS:

1. Fetch PR: `gh pr view $0`
2. Get diff: `gh pr diff $0`
3. Review changes
4. Comment: `gh pr comment $0 --body "LGTM"`
```

Invoked as: `/review-pr 123`

## Usage Patterns

### Basic Usage

#### Example 1: Simple Task Skill

**Purpose**: Create properly formatted Git commits.

**File**: `.claude/skills/commit/SKILL.md`

```markdown
---
name: commit
description: Create a Git commit following project conventions
disable-model-invocation: true
tools: Bash, Read, Grep
---

# Git Commit Workflow

Create a commit following these steps:

1. Run `git status` to see untracked and modified files
2. Run `git diff --staged` to see staged changes
3. Run `git diff` to see unstaged changes
4. Analyze all changes and draft a commit message:
   - Subject line: 50 chars max, imperative mood, no period
   - Body: Explain what and why, not how
   - Separate subject and body with blank line
5. Stage relevant files with `git add <files>`
6. Create commit with the message
7. Include co-author: `Co-Authored-By: Claude (...) <noreply@anthropic.com>`
8. Run `git status` to verify

**Important**: Never stage files that might contain secrets (.env, credentials, keys).
```

**Usage**: `/commit`

#### Example 2: Reference Knowledge Skill

**Purpose**: Provide API design patterns automatically when relevant.

**File**: `.claude/skills/api-conventions/SKILL.md`

```markdown
---
name: api-conventions
description: RESTful API design patterns and conventions. Apply when designing or implementing REST APIs.
user-invocable: false
---

# REST API Conventions

When designing or implementing REST APIs, follow these patterns:

## Resource Naming

- Use nouns for resources: `/users`, `/orders`, `/products`
- Use verbs for actions on resources: `/orders/{id}/cancel`
- Use kebab-case for multi-word resources: `/user-profiles`
- Collection: `/users`, Single: `/users/{id}`

## HTTP Methods

- **GET** `/resource` - List resources
- **GET** `/resource/{id}` - Get single resource
- **POST** `/resource` - Create resource
- **PUT** `/resource/{id}` - Replace resource
- **PATCH** `/resource/{id}` - Update resource partially
- **DELETE** `/resource/{id}` - Delete resource

## Status Codes

- **200 OK** - Success with response body
- **201 Created** - Resource created (include Location header)
- **204 No Content** - Success without response body
- **400 Bad Request** - Invalid request
- **401 Unauthorized** - Authentication required
- **403 Forbidden** - Authenticated but not authorized
- **404 Not Found** - Resource doesn't exist
- **500 Internal Server Error** - Server error

## Response Format

```json
{
  "data": { /* resource data */ },
  "meta": {
    "timestamp": "2025-01-28T10:00:00Z",
    "version": "v1"
  }
}
```

## Error Format

```json
{
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Email is required",
    "details": { "field": "email" }
  }
}
```

## Pagination

For list endpoints:
```json
{
  "data": [ /* items */ ],
  "meta": {
    "page": 1,
    "per_page": 20,
    "total": 100
  },
  "links": {
    "first": "/resource?page=1",
    "prev": null,
    "next": "/resource?page=2",
    "last": "/resource?page=5"
  }
}
```

## Versioning

- URL versioning: `/v1/users`, `/v2/users`
- Maintain backwards compatibility within major version
```

**Usage**: Claude automatically applies these patterns when you ask to create API endpoints.

#### Example 3: Hybrid Skill

**Purpose**: Review code, can be invoked manually or applied automatically.

**File**: `.claude/skills/review/SKILL.md`

```markdown
---
name: review
description: Review code for quality, security, and maintainability. Use when reviewing pull requests or code changes.
tools: Read, Grep, Bash
model: sonnet
---

# Code Review Checklist

Review code systematically:

## 1. Code Quality

- [ ] Clear and self-documenting code
- [ ] Meaningful variable and function names
- [ ] No duplicated code
- [ ] Functions are focused and single-purpose
- [ ] Appropriate abstractions

## 2. Security

- [ ] Input validation on all user input
- [ ] No SQL injection vulnerabilities
- [ ] No XSS vulnerabilities
- [ ] Secrets not hardcoded
- [ ] Authentication and authorization checks
- [ ] Secure password handling (hashing, not storing plain text)

## 3. Testing

- [ ] Tests included for new functionality
- [ ] Tests cover edge cases
- [ ] Tests are maintainable
- [ ] No tests disabled or skipped without explanation

## 4. Performance

- [ ] No obvious performance issues
- [ ] Database queries optimized
- [ ] Appropriate use of caching
- [ ] No memory leaks

## 5. Maintainability

- [ ] Follows project conventions
- [ ] Documentation updated
- [ ] No commented-out code
- [ ] Commit messages are clear

## Output Format

Organize feedback by severity:

### Critical Issues
Issues that must be fixed before merge.

### Warnings
Issues that should be fixed but not blockers.

### Suggestions
Optional improvements.

Include specific line references: `filename.ext:123`
```

**Usage**:
- Manual: `/review`
- Automatic: Claude applies when you ask "review this code"

### Advanced Usage

#### Example 4: Skill with Arguments

**Purpose**: Review a specific GitHub pull request by number.

**File**: `.claude/skills/review-pr/SKILL.md`

```markdown
---
name: review-pr
description: Review a GitHub pull request with comprehensive analysis
disable-model-invocation: true
tools: Bash, Read, Grep
---

# GitHub PR Review

Review pull request #$ARGUMENTS:

## Step 1: Fetch PR Details

```bash
gh pr view $0 --json title,body,author,files,additions,deletions
```

## Step 2: Get PR Diff

```bash
gh pr diff $0
```

## Step 3: Get Changed Files

```bash
gh pr diff $0 --name-only
```

## Step 4: Review Each File

Read modified files to understand context.

## Step 5: Check for Issues

- Security vulnerabilities
- Code quality issues
- Missing tests
- Documentation gaps
- Breaking changes

## Step 6: Provide Feedback

Summarize findings:
- What changed
- Code quality assessment
- Security concerns
- Suggestions for improvement
- Recommendation: Approve / Request Changes / Comment

Include specific line references when mentioning issues.
```

**Usage**: `/review-pr 123`

#### Example 5: Skill with Scripts

**Purpose**: Generate API documentation with validation.

**File Structure**:
```
.claude/skills/api-doc/
├── SKILL.md
├── openapi-template.yaml
├── example-endpoint.yaml
└── scripts/
    └── validate-openapi.sh
```

**SKILL.md**:
```markdown
---
name: api-doc
description: Generate OpenAPI documentation for API endpoints
tools: Read, Write, Bash
---

# API Documentation Generator

Generate OpenAPI 3.0 documentation:

## Step 1: Analyze Endpoint

Read the endpoint code to understand:
- Path and HTTP method
- Request parameters
- Request body schema
- Response schema
- Error responses

## Step 2: Generate Documentation

Use this template: @openapi-template.yaml

Follow this example: @example-endpoint.yaml

## Step 3: Validate

Run validation script:
```bash
./scripts/validate-openapi.sh path/to/generated/doc.yaml
```

## Step 4: Add to Main Spec

Merge generated doc into main OpenAPI spec file.
```

**openapi-template.yaml**:
```yaml
paths:
  /path/to/resource:
    get:
      summary: Brief description
      description: Detailed description
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Resource'
        '404':
          description: Not found
```

**scripts/validate-openapi.sh**:
```bash
#!/bin/bash
npx @redocly/cli lint "$1"
```

**Usage**: `/api-doc`

#### Example 6: Fork Context Skill

**Purpose**: Run comprehensive security audit in isolated context.

**File**: `.claude/skills/security-audit/SKILL.md`

```markdown
---
name: security-audit
description: Comprehensive security audit of the codebase
context: fork
tools: Read, Grep, Glob, Bash
model: opus
---

# Security Audit

Perform comprehensive security analysis:

## 1. Scan for Secrets

Search for potential secrets:
- API keys
- Passwords
- JWT tokens
- Private keys
- AWS credentials

## 2. Input Validation

Check all user input handling:
- SQL injection prevention
- XSS prevention
- Command injection prevention
- Path traversal prevention

## 3. Authentication & Authorization

Review:
- Login mechanisms
- Session management
- Token handling
- Permission checks

## 4. Dependencies

Check for:
- Known vulnerabilities in dependencies
- Outdated packages
- Unnecessary dependencies

## 5. Configuration

Review:
- CORS configuration
- CSRF protection
- Security headers
- HTTPS enforcement

## 6. Sensitive Data

Check:
- Password hashing (BCrypt, Argon2)
- Data encryption at rest
- PII handling
- Logging (no secrets in logs)

## Report Format

Summarize findings:
- **Critical**: Must fix immediately
- **High**: Fix before next release
- **Medium**: Fix in upcoming sprint
- **Low**: Consider addressing
- **Info**: General observations

Include specific file and line references for each finding.
```

**Usage**: `/security-audit` (runs in isolated context to keep verbose output separate)

#### Example 7: Skill with Hooks

**Purpose**: Create database migration with validation.

**File**: `.claude/skills/create-migration/SKILL.md`

```markdown
---
name: create-migration
description: Create a database migration with validation
disable-model-invocation: true
tools: Write, Bash
hooks:
  PostToolUse:
    - matcher: "Write"
      hooks:
        - type: command
          command: "./scripts/validate-migration.sh $FILE"
---

# Database Migration Creator

Create a new database migration:

## Step 1: Get Migration Details

Ask user for:
- Migration name (e.g., "add_users_table")
- Changes to make (create table, add column, etc.)

## Step 2: Generate Migration File

```sql
-- Migration: $MIGRATION_NAME
-- Created: $(date)

BEGIN;

-- Your changes here

COMMIT;
```

File: `migrations/$(date +%Y%m%d%H%M%S)_$MIGRATION_NAME.sql`

## Step 3: Validation

Hook automatically validates:
- SQL syntax
- Rollback script included
- No breaking changes to existing schemas

## Step 4: Update Migration Tracker

Add entry to `migrations/README.md`.
```

**Usage**: `/create-migration`

## Examples

### Example 1: Commit Workflow Skill

**Complete implementation**:

```markdown
---
name: commit
description: Create a Git commit following project conventions
disable-model-invocation: true
---

# Git Commit Workflow

## Important Rules

1. **Never commit secrets**: Block files like `.env`, `credentials.json`, etc.
2. **Follow commit message format**: From project CLAUDE.md
3. **Include co-author tag**: Give credit to Claude

## Workflow

### Step 1: Review Changes

Run in parallel:
```bash
git status
git diff --staged
git diff
git log -5 --oneline
```

### Step 2: Analyze Changes

Understand:
- What changed (files, functions, logic)
- Why it changed (bug fix, feature, refactor)
- Impact (breaking changes, new functionality)

### Step 3: Draft Commit Message

Format:
```
<type>(<scope>): <subject>

<body>

Co-Authored-By: Claude (us.anthropic.claude-sonnet-4-5-20250929-v1:0) <noreply@anthropic.com>
```

Types: feat, fix, refactor, test, docs, chore

Subject:
- 50 characters max
- Imperative mood ("Add" not "Added")
- No period at end

Body:
- Explain what and why
- 72 character line wrap
- Reference issues if applicable

### Step 4: Stage and Commit

```bash
git add <specific files>
git commit -m "$(cat <<'EOF'
<commit message>
EOF
)"
git status
```

### Step 5: Verify

Confirm commit successful and working tree clean.
```

### Example 2: Component Generator Skill

**Complete implementation**:

**File Structure**:
```
.claude/skills/new-component/
├── SKILL.md
├── templates/
│   ├── Component.tsx
│   ├── Component.test.tsx
│   └── Component.module.css
```

**SKILL.md**:
```markdown
---
name: new-component
description: Generate a new React component with tests and styles
disable-model-invocation: true
---

# New React Component Generator

Generate a complete React component with tests and styles.

## Step 1: Get Component Info

Ask user for:
- Component name (PascalCase)
- Component type (Page, Layout, UI component)
- Props needed

## Step 2: Generate Component File

Use template: @templates/Component.tsx

```tsx
import { useState } from 'react';
import styles from './$ComponentName.module.css';

interface $ComponentNameProps {
  // Props here
}

export function $ComponentName({ }: $ComponentNameProps) {
  return (
    <div className={styles.container}>
      {/* Component content */}
    </div>
  );
}
```

File: `src/components/$ComponentName/$ComponentName.tsx`

## Step 3: Generate Test File

Use template: @templates/Component.test.tsx

```tsx
import { render, screen } from '@testing-library/react';
import { $ComponentName } from './$ComponentName';

describe('$ComponentName', () => {
  it('renders correctly', () => {
    render(<$ComponentName />);
    // Assertions here
  });
});
```

File: `src/components/$ComponentName/$ComponentName.test.tsx`

## Step 4: Generate Styles

Use template: @templates/Component.module.css

```css
.container {
  /* Styles here */
}
```

File: `src/components/$ComponentName/$ComponentName.module.css`

## Step 5: Export Component

Add to `src/components/index.ts`:
```typescript
export { $ComponentName } from './$ComponentName/$ComponentName';
```

## Step 6: Verify

Confirm all files created and component exports correctly.
```

### Example 3: Performance Analyzer Skill

```markdown
---
name: perf-analyze
description: Analyze code for performance bottlenecks and optimization opportunities
context: fork
tools: Read, Grep, Bash
model: opus
---

# Performance Analysis

Comprehensive performance analysis workflow:

## 1. Profile Application

Run profiling tools:
```bash
# Node.js
node --prof app.js
node --prof-process isolate-*.log

# Python
python -m cProfile -o profile.stats app.py
python -m pstats profile.stats

# Java
jstack <pid>
```

## 2. Identify Hotspots

Analyze profile data for:
- Functions with high execution time
- Functions called frequently
- Memory allocations
- I/O operations

## 3. Code Review

For identified hotspots, check:

### Algorithm Efficiency
- Time complexity (O(n²) → O(n log n)?)
- Space complexity
- Unnecessary iterations

### Database Queries
- N+1 query problems
- Missing indexes
- Inefficient joins
- Overfetching data

### Memory Usage
- Memory leaks
- Unnecessary object creation
- Large data structures in memory
- Caching opportunities

### I/O Operations
- Synchronous I/O in hot paths
- Redundant file reads
- Network calls in loops

## 4. Optimization Recommendations

For each bottleneck:
- Current implementation
- Performance impact
- Recommended solution
- Expected improvement
- Implementation effort

## 5. Benchmarking Plan

Suggest benchmarks to validate improvements:
```javascript
console.time('operation');
// Code to benchmark
console.timeEnd('operation');
```

## Report Format

### Executive Summary
- Overall performance assessment
- Top 3 bottlenecks
- Expected improvement

### Detailed Findings
For each issue:
- Location (file:line)
- Current performance
- Root cause
- Solution
- Priority (P0-P3)
```

## Best Practices

### Skill Design

1. **Write clear descriptions** - Claude uses descriptions to decide when to invoke:
   ```yaml
   # Bad
   description: Reviews code

   # Good
   description: Review code for quality, security, and style. Use when reviewing pull requests, analyzing code changes, or conducting security audits.
   ```

2. **Single responsibility** - Each skill should excel at one task

3. **Use appropriate invocation control**:
   - Side effects (deploy, commit, send email) → `disable-model-invocation: true`
   - Background knowledge (patterns, conventions) → `user-invocable: false`
   - General utilities → Leave both default (true)

4. **Leverage supporting files** - Keep SKILL.md focused, move templates/examples to separate files

5. **Use fork context for high-volume** - Security audits, test runs, large analysis

6. **Specify tool restrictions** - Only grant necessary tools:
   ```yaml
   tools: Read, Grep, Glob  # Read-only reviewer
   ```

### Writing Instructions

1. **Structure with headers** - Makes instructions scannable

2. **Be specific** - "Run `npm test`" not "test the code"

3. **Include examples** - Show expected output formats

4. **Handle edge cases** - Address common failures

5. **Use checklists** - For review/validation workflows

6. **Reference supporting files** - `@template.yaml` syntax

### Tool Selection

| Tools | Use Case |
|-------|----------|
| `Read, Grep, Glob` | Read-only analysis, reviews |
| `Read, Write, Edit` | File modifications |
| `Bash` | Command execution |
| `All (default)` | Full capabilities |

### Model Selection

| Model | Use Case | Cost | Speed |
|-------|----------|------|-------|
| `haiku` | Fast, straightforward tasks | Low | Fast |
| `sonnet` | Standard tasks | Medium | Medium |
| `opus` | Complex reasoning, analysis | High | Slow |
| `inherit` | Same as main session | Varies | Varies |

## Common Patterns

### Pattern 1: Multi-Step Workflow

```markdown
---
name: workflow
description: Multi-step workflow
disable-model-invocation: true
---

# Workflow

## Step 1: Preparation
Commands and checks

## Step 2: Execution
Main work

## Step 3: Validation
Verify success

## Step 4: Cleanup
Finalize
```

### Pattern 2: Reference Knowledge

```markdown
---
name: patterns
description: Design patterns. Use when designing or architecting features.
user-invocable: false
---

# Design Patterns

When designing $FEATURE_TYPE, consider:
- Pattern 1: Use case, implementation
- Pattern 2: Use case, implementation
```

### Pattern 3: Tool with Validation

```markdown
---
name: tool
description: Tool with validation
disable-model-invocation: true
hooks:
  PostToolUse:
    - matcher: "Write"
      hooks:
        - type: command
          command: "./validate.sh"
---

Instructions...
```

### Pattern 4: Parameterized Command

```markdown
---
name: command
description: Parameterized command
disable-model-invocation: true
---

Process $ARGUMENTS:

1. Validate $0
2. Process $1
3. Output to $2
```

## Gotchas and Troubleshooting

### Common Issues

#### Issue 1: Skill Not Appearing

**Symptoms**: `/skill-name` not found

**Causes**:
- Typo in skill name
- SKILL.md in wrong location
- Missing `name` in frontmatter

**Solutions**:
```bash
# Check skill exists
ls .claude/skills/skill-name/SKILL.md

# Check name field
head -10 .claude/skills/skill-name/SKILL.md

# List all skills
# (no built-in command, check directories)
ls ~/.claude/skills/
ls .claude/skills/
```

#### Issue 2: Skill Not Auto-Invoked

**Symptoms**: Claude doesn't use skill automatically

**Causes**:
- Description doesn't match use case
- `user-invocable: false` but not relevant to task
- Description too vague

**Solutions**:
- Make description specific about when to use
- Include keywords Claude might match
- Test by explicitly asking Claude to use the skill

#### Issue 3: Supporting Files Not Found

**Symptoms**: `@template.yaml` not loaded

**Causes**:
- File doesn't exist
- Path incorrect (relative to SKILL.md)
- Missing @ prefix

**Solutions**:
```bash
# Verify file exists relative to SKILL.md
ls .claude/skills/my-skill/template.yaml

# Use @ prefix
@template.yaml

# Use relative path if needed
@../shared/template.yaml
```

#### Issue 4: Arguments Not Substituting

**Symptoms**: `$0` appears literally in output

**Causes**:
- Substitution only works in skill instructions
- Not in supporting files
- Needs to be in SKILL.md body, not frontmatter

**Solution**: Arguments substitute only in SKILL.md markdown body, not in imported files.

### Debugging

#### Test Skill Manually

```
User: /skill-name arg1 arg2
```

Observe:
- Does skill invoke?
- Are arguments substituted correctly?
- Does Claude follow instructions?

#### Test Auto-Invocation

```
User: [Describe task that should trigger skill]
```

Check if Claude mentions or uses the skill.

#### Inspect Skill Content

```bash
cat .claude/skills/skill-name/SKILL.md
```

Verify:
- Frontmatter valid YAML
- Name matches directory
- Description is clear
- Instructions are specific

### Limitations

1. **No conditional logic in SKILL.md** - Can't write "if X then Y" (workaround: use Bash scripts)
2. **Arguments in body only** - Can't use `$0` in frontmatter
3. **No skill chaining syntax** - Can't directly invoke one skill from another (Claude can choose to)
4. **No access to environment variables** - Can't use `$ENV_VAR` in SKILL.md
5. **Limited context in fork mode** - Forked skills don't see main conversation history

## API Reference

### Frontmatter Fields

#### Required Fields

| Field | Type | Description |
|-------|------|-------------|
| `name` | string | Skill name, used for `/name` command. Lowercase, hyphens only. |
| `description` | string | What skill does and when to use it. Claude uses this to decide auto-invocation. |

#### Optional Fields

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `tools` | string | All | Comma-separated allowed tools: `Read, Write, Bash` |
| `disallowedTools` | string | None | Tools to deny |
| `model` | string | inherit | Model: `sonnet`, `opus`, `haiku`, `inherit` |
| `disable-model-invocation` | boolean | false | If true, only user can invoke (not Claude) |
| `user-invocable` | boolean | true | If false, only Claude can invoke (not user) |
| `context` | string | default | Context mode: `default` or `fork` |
| `hooks` | object | {} | Skill-specific hooks (same format as settings.json) |
| `allowedPrompts` | array | [] | Bash permission prompts |

### Dynamic Variables

| Variable | Value | Scope |
|----------|-------|-------|
| `$ARGUMENTS` | All arguments as string | SKILL.md body |
| `$0`, `$1`, `$N` | Individual arguments | SKILL.md body |
| `${CLAUDE_SESSION_ID}` | Current session ID | SKILL.md body |
| `${CLAUDE_PLUGIN_ROOT}` | Plugin root directory | SKILL.md body (plugins only) |

### File Imports

**Syntax**: `@path/to/file`

**Resolution**:
- Relative to SKILL.md location
- Tilde expansion: `@~/file`
- Absolute paths: `@/full/path`

## Related Features

### CLAUDE.md
Skills can reference project conventions in CLAUDE.md. Use CLAUDE.md for persistent facts, Skills for workflows.

### Subagents
Skills can be preloaded into subagents via frontmatter. Subagents provide isolation, Skills provide instructions.

### Hooks
Skills can define hooks in frontmatter. Use hooks to validate skill operations (e.g., validate generated files).

### MCP
Skills can invoke MCP tools via Bash. MCP provides external data, Skills provide workflows for using that data.

## Additional Resources

- **Agent Skills Standard**: https://agentskills.io
- **Official Documentation**: https://docs.anthropic.com/claude/docs/claude-code-skills
- **Community Skills**: https://github.com/topics/claude-skills
- **Skill Marketplace**: https://claude.ai/plugins

---

**Next**: Learn about [Subagents](./3.%20Subagents.md) to create specialized AI assistants that can use your skills.
