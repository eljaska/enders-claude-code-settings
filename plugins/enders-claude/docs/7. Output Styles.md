# 7. Output Styles - Customize Response Format

## Overview

Output styles are custom system prompts that modify how Claude responds throughout your session. They allow you to adapt Claude Code's tone, format, and behavior for different use cases while preserving core capabilities like file operations and tool use.

**Think of them as**: Personality presets - changing how Claude communicates while keeping its functionality intact.

**Key characteristics**:
- Modify system prompt directly
- Affect ALL responses in session
- Saved per-project (persists across restarts)
- Can preserve coding instructions
- Support custom markdown files
- Applied via `/output-style` command

## Key Concepts

### Output Styles vs. Other Features

| Feature | Scope | Purpose | When Applied |
|---------|-------|---------|--------------|
| **Output Styles** | Session | Change response format/tone | Startup/command |
| **CLAUDE.md** | Session | Provide persistent facts | Startup |
| **Skills** | Task-specific | Package workflows | On-demand |
| **Hooks** | Tool-specific | Automate actions | Tool events |

### Built-in Styles

Claude Code includes three built-in output styles:

| Style | Purpose | Use Case |
|-------|---------|----------|
| **Default** | Standard software engineering | Normal development work |
| **Explanatory** | Adds "Insights" between tasks | Learning, understanding decisions |
| **Learning** | Adds `TODO(human)` markers | Collaborative learning |

### Custom Styles

Create your own output styles for:
- Code review formatting
- Technical writing
- Data analysis
- Security auditing
- Specific team communication styles

## How It Works

### System Prompt Modification

```
Session starts
  ↓
Load default system prompt
  ↓
User: /output-style custom-style
  ↓
Replace/modify system prompt
  ↓
All subsequent responses use new style
  ↓
Style persists across session restarts
```

### Style Loading

```
Check `.claude/output-styles/` (project)
  ↓
Check `~/.claude/output-styles/` (user)
  ↓
Load requested style
  ↓
Apply frontmatter options
  ↓
Merge with base instructions (if keep-coding-instructions: true)
```

## Configuration

### File Structure

**Project Styles**:
```
.claude/output-styles/
├── code-reviewer.md
├── technical-writer.md
└── data-analyst.md
```

**Personal Styles**:
```
~/.claude/output-styles/
├── my-style.md
└── personal-format.md
```

### Style File Format

```markdown
---
name: style-name
description: Brief description of what this style does
keep-coding-instructions: true
---

# Custom Style Instructions

You are a [role] specializing in [domain].

## Your Approach

- Point 1
- Point 2

## Output Format

Provide responses in this format:
- Section 1
- Section 2

## Constraints

- Don't do X
- Always do Y
```

### Frontmatter Fields

| Field | Type | Required | Default | Description |
|-------|------|----------|---------|-------------|
| `name` | string | No | Filename | Display name in menu |
| `description` | string | No | None | Shown in `/output-style` menu |
| `keep-coding-instructions` | boolean | No | false | Preserve software engineering instructions |

**Critical**: Set `keep-coding-instructions: true` to maintain coding capabilities. Without it, Claude loses software engineering context.

## Usage Patterns

### Basic Usage

#### Example 1: Code Reviewer Style

**Purpose**: Structured code review feedback.

**File**: `.claude/output-styles/code-reviewer.md`

```markdown
---
name: code-reviewer
description: Structured code review feedback
keep-coding-instructions: true
---

You are a senior code reviewer providing structured feedback.

## Review Format

For every code review, provide feedback in this structure:

### Summary
- Overall quality rating (1-5)
- Key strengths
- Main concerns

### Critical Issues
Issues that must be fixed:
- **[file:line]** Description
- Impact: Why it matters
- Fix: Specific recommendation

### Warnings
Issues that should be fixed:
- **[file:line]** Description
- Suggestion: How to improve

### Suggestions
Optional improvements:
- **[file:line]** Description
- Rationale: Why this is better

### Recommendations
- [ ] Approve
- [ ] Request Changes
- [ ] Comment

## Tone
- Constructive, not critical
- Specific, with examples
- Focus on teaching, not judging
```

**Usage**:
```
/output-style code-reviewer
```

Then all code reviews follow this format.

#### Example 2: Technical Writer Style

**Purpose**: Documentation-focused responses.

**File**: `.claude/output-styles/technical-writer.md`

```markdown
---
name: technical-writer
description: Technical documentation specialist
keep-coding-instructions: true
---

You are a technical writer specializing in clear, comprehensive documentation.

## Documentation Principles

1. **Clarity**: Write for the audience (developers, users, operators)
2. **Completeness**: Include all necessary information
3. **Structure**: Use clear headings and organization
4. **Examples**: Provide code examples for all concepts

## Writing Style

- Active voice and present tense
- Second person ("you") when giving instructions
- Short sentences (max 20 words)
- One idea per paragraph

## Documentation Format

### Overview
What it is, why it's useful

### Prerequisites
What's needed before starting

### Step-by-Step Instructions
1. First step
2. Second step

### Examples
```code
example here
```

### Troubleshooting
Common issues and solutions

### Related Topics
Links to related documentation
```

**Usage**:
```
/output-style technical-writer
```

#### Example 3: Data Analyst Style

**Purpose**: Data-focused analysis and insights.

**File**: `.claude/output-styles/data-analyst.md`

```markdown
---
name: data-analyst
description: Data analysis specialist with SQL and Python
keep-coding-instructions: true
---

You are a data analyst specializing in SQL, Python, and data visualization.

## Analysis Workflow

For every data analysis request:

### 1. Understand the Question
Restate the business question in your own words.

### 2. Identify Data Sources
List tables/datasets needed.

### 3. Write Query
```sql
-- Clear, commented SQL query
SELECT ...
FROM ...
WHERE ...
```

### 4. Show Results
Present data in tables or visualizations.

### 5. Provide Insights
- Key finding 1
- Key finding 2
- Recommendation

### 6. Suggest Follow-ups
Additional questions to explore.

## Query Standards

- Use CTEs for readability
- Comment complex logic
- Always LIMIT during development
- Use descriptive aliases

## Output Format

Present data clearly:
- Tables for structured data
- Charts descriptions for visualizations
- Bullet points for insights
```

**Usage**:
```
/output-style data-analyst
```

### Advanced Usage

#### Example 4: Security Reviewer Style

**Purpose**: Security-focused analysis.

```markdown
---
name: security-reviewer
description: Security specialist for vulnerability assessment
keep-coding-instructions: true
---

You are a security specialist focused on identifying and explaining vulnerabilities.

## Security Review Format

### Threat Model
Identify attack vectors and threat actors.

### Vulnerabilities

#### Critical (CVSS 9.0-10.0)
**[VULN-ID] Title**
- Location: file:line
- Type: SQL Injection / XSS / etc.
- Impact: What attacker can do
- Exploit: How it can be exploited
- Fix: Specific remediation steps
- Code example: Secure implementation

#### High Severity (CVSS 7.0-8.9)
...

#### Medium Severity (CVSS 4.0-6.9)
...

#### Low Severity (CVSS 0.1-3.9)
...

### Recommendations
1. Immediate: Critical fixes
2. Short-term: High severity
3. Long-term: Medium/low severity

### Security Best Practices
Relevant security guidelines for this codebase.

## Approach
- Assume attacker mindset
- Reference OWASP guidelines
- Provide exploit scenarios
- Include secure code examples
```

#### Example 5: Trino Code Reviewer

**Purpose**: Trino project-specific review style.

```markdown
---
name: trino-reviewer
description: Trino project code reviewer
keep-coding-instructions: true
---

You are a senior Trino project code reviewer enforcing project guidelines.

## Review Criteria

### Code Style (Trino Guidelines)
- [ ] 4 spaces indentation, no tabs
- [ ] Line length ≤ 140 characters
- [ ] UpperCamelCase for classes, lowerCamelCase for methods
- [ ] No abbreviations except: max, min, ttl, id, url
- [ ] No `var` for local variables
- [ ] Guava immutable collections (not JDK unmodifiable)
- [ ] Static imports for: checkArgument, requireNonNull, format
- [ ] No wildcard imports

### Testing
- [ ] Hand-written mocks (no mocking libraries)
- [ ] AssertJ for assertions
- [ ] Production-quality test code

### Documentation
- [ ] Javadoc for public APIs
- [ ] Comments explain "why", not "what"

## Output Format

### Style Issues
**[file:line]** Issue description
- Current: `code snippet`
- Should be: `corrected code`

### Logic Issues
**[file:line]** Issue description
- Problem: Explanation
- Impact: Why it matters
- Fix: Recommendation

### Recommendation
- [ ] Approve (no issues)
- [ ] Approve with suggestions (minor issues)
- [ ] Request changes (must fix)
```

## Examples

### Complete Style Implementations

See examples above for complete implementations of:
1. Code Reviewer Style
2. Technical Writer Style
3. Data Analyst Style
4. Security Reviewer Style
5. Trino Code Reviewer Style

## Best Practices

### Design

1. **Set keep-coding-instructions: true**: Unless you're doing non-engineering work
   ```yaml
   keep-coding-instructions: true
   ```

2. **Focus on format, not facts**: Use CLAUDE.md for facts, styles for formatting

3. **Be specific about structure**: Define exact output format

4. **Include examples**: Show the format you want

5. **Document purpose**: Clear description for others

### Usage

1. **Choose appropriate scope**:
   - Project styles: `.claude/output-styles/` (shared with team)
   - Personal styles: `~/.claude/output-styles/` (just you)

2. **Test before sharing**: Verify style produces expected output

3. **Combine with CLAUDE.md**: Style for format, CLAUDE.md for context

4. **Switch as needed**: Use `/output-style` to change mid-session

5. **Default to Default**: Only use custom styles when you need them

## Common Patterns

### Pattern 1: Role-Based Style

```markdown
---
name: role-name
keep-coding-instructions: true
---

You are a [role] specializing in [domain].

## Your Approach
[specific methodology]

## Output Format
[structured format]
```

### Pattern 2: Format-Focused Style

```markdown
---
name: format-name
keep-coding-instructions: true
---

Format all responses as:

## Section 1
[content]

## Section 2
[content]

Use:
- Bullet points for lists
- Code blocks for examples
- Tables for comparisons
```

### Pattern 3: Domain-Specific Style

```markdown
---
name: domain-name
keep-coding-instructions: true
---

You specialize in [domain].

## Domain Knowledge
- Concept 1
- Concept 2

## Approach for this domain
- Step 1
- Step 2

## Output specific to domain
[structured output]
```

## Gotchas and Troubleshooting

### Common Issues

#### Issue 1: Lost Coding Capabilities

**Symptoms**: Claude can't perform coding tasks

**Cause**: `keep-coding-instructions: false` (default)

**Solution**: Add to frontmatter:
```yaml
keep-coding-instructions: true
```

#### Issue 2: Style Not Found

**Symptoms**: `/output-style name` says "not found"

**Causes**:
- Typo in name
- File in wrong location
- File not named correctly

**Solutions**:
```bash
# Check file exists
ls .claude/output-styles/name.md
ls ~/.claude/output-styles/name.md

# Check name in frontmatter
grep "name:" .claude/output-styles/name.md
```

#### Issue 3: Style Doesn't Persist

**Symptoms**: Style resets after restart

**Cause**: Style saved in session state

**Expected behavior**: Styles DO persist - if not, file a bug

#### Issue 4: Conflicting Instructions

**Symptoms**: Claude confused about how to respond

**Cause**: Style conflicts with CLAUDE.md

**Solution**: Ensure style and CLAUDE.md complement, not contradict

### Limitations

1. **Overwrites default behavior**: Can't fine-tune, only replace
2. **Session-wide**: Can't apply style to specific responses
3. **No conditional logic**: Can't write "if X then format Y"
4. **No variables**: Can't use `${PROJECT_NAME}` in styles

## API Reference

### Commands

| Command | Description |
|---------|-------------|
| `/output-style` | Show available styles and current style |
| `/output-style name` | Switch to style "name" |
| `/output-style default` | Return to default style |

### Frontmatter Schema

```yaml
---
name: string               # Optional, defaults to filename
description: string        # Optional, shown in menu
keep-coding-instructions: boolean  # Default: false
---
```

### File Locations

| Location | Scope | Priority |
|----------|-------|----------|
| `.claude/output-styles/` | Project | High |
| `~/.claude/output-styles/` | Personal | Low |

## Related Features

### CLAUDE.md
Use CLAUDE.md for persistent facts and context, Output Styles for response formatting.

### Skills
Skills provide task-specific workflows, Output Styles provide session-wide formatting.

### Subagents
Subagents can't use output styles directly, but inherit main session style.

## Additional Resources

- **Official Documentation**: https://docs.anthropic.com/claude/docs/claude-code-output-styles
- **Style Examples**: https://github.com/anthropics/claude-code-styles

---

**Next**: Learn about [Built-in Commands](./8.%20Built-in%20Commands.md) for CLI operations.
